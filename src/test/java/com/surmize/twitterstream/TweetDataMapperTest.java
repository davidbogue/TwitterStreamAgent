package com.surmize.twitterstream;

import com.surmize.models.Tweet;
import org.junit.Assert;
import org.junit.Test;
import twitter4j.Status;
import twitter4j.TwitterException;
import twitter4j.TwitterObjectFactory;

public class TweetDataMapperTest {

    @Test
    public void testMapStatus() throws TwitterException {
        String msg = "{\"created_at\":\"Sun Jun 22 03:42:54 +0000 2014\",\"id\":480556507314925569,\"id_str\":\"480556507314925569\",\"text\":\"RT @KymLang: $AKAM Monthly Deep Crab https:\\/\\/t.co\\/s5FmDBNCyR via @tradingview $AKAM\",\"source\":\"\\u003ca href=\\\"http:\\/\\/twitter.com\\/download\\/iphone\\\" rel=\\\"nofollow\\\"\\u003eTwitter for iPhone\\u003c\\/a\\u003e\",\"truncated\":false,\"in_reply_to_status_id\":null,\"in_reply_to_status_id_str\":null,\"in_reply_to_user_id\":null,\"in_reply_to_user_id_str\":null,\"in_reply_to_screen_name\":null,\"user\":{\"id\":809122560,\"id_str\":\"809122560\",\"name\":\"Thomas David\",\"screen_name\":\"jmaykey\",\"location\":\"\",\"url\":null,\"description\":null,\"protected\":false,\"followers_count\":46,\"friends_count\":310,\"listed_count\":0,\"created_at\":\"Fri Sep 07 15:54:47 +0000 2012\",\"favourites_count\":1503,\"utc_offset\":null,\"time_zone\":null,\"geo_enabled\":false,\"verified\":false,\"statuses_count\":1775,\"lang\":\"en\",\"contributors_enabled\":false,\"is_translator\":false,\"is_translation_enabled\":false,\"profile_background_color\":\"C0DEED\",\"profile_background_image_url\":\"http:\\/\\/abs.twimg.com\\/images\\/themes\\/theme1\\/bg.png\",\"profile_background_image_url_https\":\"https:\\/\\/abs.twimg.com\\/images\\/themes\\/theme1\\/bg.png\",\"profile_background_tile\":false,\"profile_image_url\":\"http:\\/\\/pbs.twimg.com\\/profile_images\\/3777835052\\/6267d37775987642fe1112e41ba86145_normal.jpeg\",\"profile_image_url_https\":\"https:\\/\\/pbs.twimg.com\\/profile_images\\/3777835052\\/6267d37775987642fe1112e41ba86145_normal.jpeg\",\"profile_banner_url\":\"https:\\/\\/pbs.twimg.com\\/profile_banners\\/809122560\\/1370808640\",\"profile_link_color\":\"0084B4\",\"profile_sidebar_border_color\":\"C0DEED\",\"profile_sidebar_fill_color\":\"DDEEF6\",\"profile_text_color\":\"333333\",\"profile_use_background_image\":true,\"default_profile\":true,\"default_profile_image\":false,\"following\":null,\"follow_request_sent\":null,\"notifications\":null},\"geo\":null,\"coordinates\":null,\"place\":null,\"contributors\":null,\"retweeted_status\":{\"created_at\":\"Sun Jun 22 03:22:42 +0000 2014\",\"id\":480551423310974976,\"id_str\":\"480551423310974976\",\"text\":\"$AKAM Monthly Deep Crab https:\\/\\/t.co\\/s5FmDBNCyR via @tradingview $AKAM\",\"source\":\"\\u003ca href=\\\"https:\\/\\/dev.twitter.com\\/docs\\/tfw\\\" rel=\\\"nofollow\\\"\\u003eTwitter for Websites\\u003c\\/a\\u003e\",\"truncated\":false,\"in_reply_to_status_id\":null,\"in_reply_to_status_id_str\":null,\"in_reply_to_user_id\":null,\"in_reply_to_user_id_str\":null,\"in_reply_to_screen_name\":null,\"user\":{\"id\":124585235,\"id_str\":\"124585235\",\"name\":\"Kym L\",\"screen_name\":\"KymLang\",\"location\":\"\",\"url\":null,\"description\":\"Not my actual name - but close\\r\\n\\r\\n(shhh....I'm napping)\\r\\n\\r\\nOh, yeah.  I do charts, too\",\"protected\":false,\"followers_count\":1203,\"friends_count\":35,\"listed_count\":48,\"created_at\":\"Fri Mar 19 22:16:56 +0000 2010\",\"favourites_count\":1246,\"utc_offset\":-25200,\"time_zone\":\"Pacific Time (US & Canada)\",\"geo_enabled\":false,\"verified\":false,\"statuses_count\":41907,\"lang\":\"en\",\"contributors_enabled\":false,\"is_translator\":false,\"is_translation_enabled\":false,\"profile_background_color\":\"B2DFDA\",\"profile_background_image_url\":\"http:\\/\\/abs.twimg.com\\/images\\/themes\\/theme13\\/bg.gif\",\"profile_background_image_url_https\":\"https:\\/\\/abs.twimg.com\\/images\\/themes\\/theme13\\/bg.gif\",\"profile_background_tile\":false,\"profile_image_url\":\"http:\\/\\/pbs.twimg.com\\/profile_images\\/378800000777679770\\/a5488b82085c750da69cbb28ef66e0cc_normal.jpeg\",\"profile_image_url_https\":\"https:\\/\\/pbs.twimg.com\\/profile_images\\/378800000777679770\\/a5488b82085c750da69cbb28ef66e0cc_normal.jpeg\",\"profile_banner_url\":\"https:\\/\\/pbs.twimg.com\\/profile_banners\\/124585235\\/1402775445\",\"profile_link_color\":\"93A644\",\"profile_sidebar_border_color\":\"EEEEEE\",\"profile_sidebar_fill_color\":\"FFFFFF\",\"profile_text_color\":\"333333\",\"profile_use_background_image\":true,\"default_profile\":false,\"default_profile_image\":false,\"following\":null,\"follow_request_sent\":null,\"notifications\":null},\"geo\":null,\"coordinates\":null,\"place\":null,\"contributors\":null,\"retweet_count\":1,\"favorite_count\":1,\"entities\":{\"hashtags\":[],\"symbols\":[{\"text\":\"AKAM\",\"indices\":[0,5]},{\"text\":\"AKAM\",\"indices\":[65,70]}],\"urls\":[{\"url\":\"https:\\/\\/t.co\\/s5FmDBNCyR\",\"expanded_url\":\"https:\\/\\/www.tradingview.com\\/x\\/FNlvVPJu\\/\",\"display_url\":\"tradingview.com\\/x\\/FNlvVPJu\\/\",\"indices\":[24,47]}],\"user_mentions\":[{\"screen_name\":\"tradingview\",\"name\":\"TradingView\",\"id\":373457750,\"id_str\":\"373457750\",\"indices\":[52,64]}]},\"favorited\":false,\"retweeted\":false,\"possibly_sensitive\":false,\"lang\":\"tl\"},\"retweet_count\":0,\"favorite_count\":0,\"entities\":{\"hashtags\":[],\"symbols\":[{\"text\":\"AKAM\",\"indices\":[13,18]},{\"text\":\"AKAM\",\"indices\":[78,83]}],\"urls\":[{\"url\":\"https:\\/\\/t.co\\/s5FmDBNCyR\",\"expanded_url\":\"https:\\/\\/www.tradingview.com\\/x\\/FNlvVPJu\\/\",\"display_url\":\"tradingview.com\\/x\\/FNlvVPJu\\/\",\"indices\":[37,60]}],\"user_mentions\":[{\"screen_name\":\"KymLang\",\"name\":\"Kym L\",\"id\":124585235,\"id_str\":\"124585235\",\"indices\":[3,11]},{\"screen_name\":\"tradingview\",\"name\":\"TradingView\",\"id\":373457750,\"id_str\":\"373457750\",\"indices\":[65,77]}]},\"favorited\":false,\"retweeted\":false,\"possibly_sensitive\":false,\"filter_level\":\"medium\",\"lang\":\"tl\",\"timestamp\":1403408574332}";
        Status status = TwitterObjectFactory.createStatus(msg);
        Tweet t = TweetDataMapper.getTweetFromStatus(status);
        
        Assert.assertTrue(480556507314925569l == t.id);
        
    }
}
